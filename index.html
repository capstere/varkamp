<!DOCTYPE html>
<html lang="sv">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>V√ÖRKAMP‚Åµ ‚Äì Avslut</title>
  <style>
    body { font-family: sans-serif; background: #2d5f2e; color: #fff; margin:0; padding:20px; }
    h1 { text-align:center; margin-bottom:0.5em; }
    form, #summary { background: #3d7f3e; padding: 20px; border-radius: 8px; max-width:400px; margin: 0 auto; }
    form input, form button, #summary div { width:100%; margin-bottom:12px; }
    form input { padding:8px; border:none; border-radius:4px; background:#f0f8e0; color:#333; }
    form button { padding:10px; border:none; border-radius:4px; background:#f4e842; font-weight:bold; cursor:pointer; }
    #summary { display:none; text-align:left; }
    #summary img { max-width:100%; border:2px solid #fff; border-radius:4px; margin-bottom:12px; }
    #send-info { font-size:0.9em; text-align:center; margin-top:1em; }
  </style>
  <!-- QR-bibliotek -->
  <script src="https://cdn.jsdelivr.net/gh/davidshimjs/qrcodejs/qrcode.min.js"></script>
</head>
<body>

  <h1>V√ÖRKAMP‚Åµ ‚Äì Slutkluring</h1>

  <!-- Formul√§r f√∂r att samla in info -->
  <form id="game-form">
    <input type="text" id="latin" name="latin" placeholder="Tr√§dets namn (latin)" required>
    <input type="text" id="team"  name="team"  placeholder="Lagnamn" required>
    <input type="text" id="time"  name="time"  placeholder="Tid (mm:ss)" pattern="[0-9]{1,2}:[0-9]{2}" required>
    <button type="submit">Visa sammanfattning</button>
  </form>

  <!-- Sammanfattningsvy som deltagaren sk√§rmdumpar -->
  <div id="summary">
    <h1>üéâ Bra jobbat!</h1>
    <div><strong>Tr√§d (latin):</strong> <span id="sum-latin"></span></div>
    <div><strong>Lagnamn:</strong> <span id="sum-team"></span></div>
    <div><strong>Tid:</strong> <span id="sum-time"></span></div>
    <div><strong>Slutl√∂senord:</strong> <span id="sum-secret"></span></div>
    <div><strong>QR-kod:</strong></div>
    <div id="qrcode"></div>
    <div id="send-info">
      Sk√§rmdumpa den h√§r vyn och skicka den via SMS till:<br>
      <strong>+46 730 736 978</strong>
    </div>
  </div>

  <script>
    const form = document.getElementById('game-form');
    const summary = document.getElementById('summary');

    // Generera ett enkelt ‚Äúslutl√∂senord‚Äù ‚Äì kan vara fast eller slumpas
    const secretCode = 'KRAM' + Math.floor(Math.random()*900+100);

    form.addEventListener('submit', e => {
      e.preventDefault();
      // H√§mta v√§rden
      const latin = document.getElementById('latin').value;
      const team  = document.getElementById('team').value;
      const time  = document.getElementById('time').value;

      // Fyll i sammanfattningen
      document.getElementById('sum-latin').textContent = latin;
      document.getElementById('sum-team').textContent  = team;
      document.getElementById('sum-time').textContent  = time;
      document.getElementById('sum-secret').textContent= secretCode;

      // Generera QR med just l√∂senords-URL om du vill
      const payloadUrl = window.location.origin + window.location.pathname +
                         `?secret=${encodeURIComponent(secretCode)}`;
      new QRCode(document.getElementById('qrcode'), {
        text: payloadUrl,
        width: 150,
        height:150
      });

      // D√∂lj formul√§ret, visa summary
      form.style.display = 'none';
      summary.style.display = 'block';
    });
  </script>
</body>
</html>